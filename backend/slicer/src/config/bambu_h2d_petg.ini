# Bambu Lab H2D Printer Profile - PETG Material
# Feature: 002-3d-model-pipeline
# Satisfies: FR-023 (Bambu Lab H2D), FR-025 (PETG profile)

[printer]
printer_model = Bambu Lab H2D
printer_variant = 0.4mm nozzle
bed_shape = 0x0,256x0,256x256,0x256
max_print_height = 256
printer_technology = FFF

[print]
# Layer settings (FR-026)
layer_height = 0.2
first_layer_height = 0.2
perimeters = 3
solid_layers = 5

# Infill (FR-027)
fill_density = 20%
fill_pattern = gyroid

# Speed settings (reduced for PETG)
perimeter_speed = 50
external_perimeter_speed = 35
infill_speed = 60
solid_infill_speed = 50
top_solid_infill_speed = 35
first_layer_speed = 25

# Supports (FR-029)
support_material = 1
support_material_auto = 1
support_material_angle = 45
support_material_interface_layers = 3

[filament]
filament_type = PETG
filament_diameter = 1.75

# Temperature settings (FR-025)
temperature = 235
first_layer_temperature = 235
bed_temperature = 70
first_layer_bed_temperature = 70

# Cooling (PETG requires reduced cooling)
fan_always_on = 1
min_fan_speed = 50
max_fan_speed = 50
bridge_fan_speed = 75
disable_fan_first_layers = 3

# Retraction (slightly more for PETG)
retraction_length = 1.0
retraction_speed = 35
retract_before_travel = 2

# Material properties
filament_density = 1.27
filament_cost = 25.0

[printer_settings]
nozzle_diameter = 0.4
retract_length = 1.0
retract_speed = 35
z_offset = 0

# G-code customization
start_gcode = M104 S235 ; set nozzle temp\nM140 S70 ; set bed temp\nM190 S70 ; wait for bed temp\nM109 S235 ; wait for nozzle temp\nG28 ; home all axes\nG1 Z5 F5000 ; lift nozzle\n
end_gcode = M104 S0 ; turn off nozzle\nM140 S0 ; turn off bed\nG28 X0 Y0 ; home X and Y\nM84 ; disable motors\n
